2025-07-01 01:08:43 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 17836 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 01:08:43 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 01:08:43 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 01:08:44 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 01:08:44 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 6 JPA repository interfaces.
2025-07-01 01:08:44 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 01:08:44 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 01:08:44 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 01:08:45 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 01:08:45 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1084 ms
2025-07-01 01:08:45 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 01:08:45 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 01:08:45 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 01:08:45 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 01:08:45 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 01:08:45 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 01:08:45 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 01:08:45 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 2cee6ee8-3d83-4a33-9789-a083b243ddee
2025-07-01 01:08:45 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 01:08:45 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 01:08:45 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 01:08:46 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 01:08:46 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 01:08:47 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 01:08:47 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 01:08:47 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 01:08:47 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 01:08:47 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 01:08:47 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 01:08:47 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 01:08:48 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 01:08:48 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 4.563 seconds (process running for 5.009)
2025-07-01 01:10:46 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-01 01:10:46 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-01 01:10:46 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-01 01:10:46 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/register
2025-07-01 01:10:46 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-07-01 01:10:46 [http-nio-8080-exec-2] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/register with Authorization header: null
2025-07-01 01:10:46 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/auth/register
2025-07-01 01:10:46 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/register
2025-07-01 01:10:46 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 01:10:46 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-07-01 01:10:46 [http-nio-8080-exec-2] INFO  c.h.medical.controller.AuthAPI - Processing registration request for email: vymainguyen1908@gmail.com
2025-07-01 01:10:46 [http-nio-8080-exec-2] INFO  c.h.medical.service.EmailService - Attempting to send OTP email to: vymainguyen1908@gmail.com
2025-07-01 01:10:50 [http-nio-8080-exec-2] INFO  c.h.medical.service.EmailService - OTP email sent successfully to: vymainguyen1908@gmail.com
2025-07-01 01:11:09 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/register-verify-otp
2025-07-01 01:11:09 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/register-verify-otp
2025-07-01 01:11:09 [http-nio-8080-exec-4] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/register-verify-otp with Authorization header: null
2025-07-01 01:11:09 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/auth/register-verify-otp
2025-07-01 01:11:09 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/register-verify-otp
2025-07-01 01:11:09 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 01:11:09 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/register-verify-otp
2025-07-01 01:11:09 [http-nio-8080-exec-4] INFO  c.h.medical.controller.AuthAPI - Verifying OTP for email: vymainguyen1908@gmail.com
2025-07-01 01:11:16 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-07-01 01:11:16 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-07-01 01:11:16 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/login with Authorization header: null
2025-07-01 01:11:16 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/auth/login
2025-07-01 01:11:16 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/login
2025-07-01 01:11:16 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 01:11:16 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-07-01 01:11:16 [http-nio-8080-exec-6] INFO  c.h.medical.controller.AuthAPI - Processing login request for email: vymainguyen1908@gmail.com
2025-07-01 01:11:17 [http-nio-8080-exec-6] INFO  c.h.medical.controller.AuthAPI - Generated JWT for user vymainguyen1908@gmail.com: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTM5MzQ3N30.D656ti_lMmSLeO-gFHN_4CY_yGQi_9czcawiqCZMLUg
2025-07-01 01:11:17 [http-nio-8080-exec-6] DEBUG c.h.medical.controller.AuthAPI - Token claims - username: vymainguyen1908@gmail.com, role: PATIENT, fullName: Nguyen Mai Tuong Vy, expiresAt: Wed Jul 02 01:11:17 GMT+07:00 2025
2025-07-01 01:11:19 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:11:19 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:11:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:11:19 [http-nio-8080-exec-8] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 01:11:19 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 01:11:19 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 01:11:19 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 01:11:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:11:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:11:19 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 01:11:19 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 01:11:19 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 01:11:19 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 01:11:19 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:11:26 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors/1/schedule
2025-07-01 01:11:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors/1/schedule
2025-07-01 01:11:26 [http-nio-8080-exec-2] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors/1/schedule with Authorization header: null
2025-07-01 01:11:26 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors/1/schedule
2025-07-01 01:11:26 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors/1/schedule
2025-07-01 01:11:26 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 01:11:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors/1/schedule
2025-07-01 01:11:26 [http-nio-8080-exec-2] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'date' for method parameter type String is not present]
2025-07-01 01:11:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 01:11:26 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 01:11:26 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 01:12:33 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 01:12:33 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 01:12:33 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 01:12:33 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTM5MzQ3N30.D656ti_lMmSLeO-gFHN_4CY_yGQi_9czcawiqCZMLUg
2025-07-01 01:12:33 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTM5MzQ3N30.D656ti_lMmSLeO-gFHN_4CY_yGQi_9czcawiqCZMLUg
2025-07-01 01:12:33 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 01:12:33 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 01:12:33 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 01:12:33 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 01:12:33 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 01:12:33 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 01:12:33 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 01:12:33 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 01:12:34 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 01:12:34 [http-nio-8080-exec-9] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTM5MzQ3N30.D656ti_lMmSLeO-gFHN_4CY_yGQi_9czcawiqCZMLUg
2025-07-01 01:12:34 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTM5MzQ3N30.D656ti_lMmSLeO-gFHN_4CY_yGQi_9czcawiqCZMLUg
2025-07-01 01:12:34 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 01:12:34 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 01:12:34 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 01:12:34 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 01:12:34 [http-nio-8080-exec-9] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 01:12:34 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 01:12:34 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 01:12:34 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 01:12:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:12:53 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:12:53 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:12:53 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 01:12:53 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 01:12:53 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 01:12:53 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 01:12:53 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:12:53 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:12:53 [http-nio-8080-exec-1] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 01:12:53 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 01:12:53 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 01:12:53 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 01:12:53 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 01:13:30 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 01:13:30 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 01:13:30 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 01:13:30 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 01:13:30 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-01 14:27:35 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 7676 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 14:27:35 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 14:27:35 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 14:27:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 14:27:36 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 68 ms. Found 6 JPA repository interfaces.
2025-07-01 14:27:37 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 14:27:37 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 14:27:37 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 14:27:37 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 14:27:37 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1879 ms
2025-07-01 14:27:37 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 14:27:37 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 14:27:38 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 14:27:38 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 14:27:38 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 14:27:38 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 14:27:38 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 14:27:39 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: bf717210-1acd-43ae-94fe-dc2be23dc18b
2025-07-01 14:27:39 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 14:27:39 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 14:27:39 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 14:27:40 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 14:27:41 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 14:27:41 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 14:27:42 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 14:27:42 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 14:27:42 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 14:27:42 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 14:27:43 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 14:27:43 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 14:27:43 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 14:27:43 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 8.496 seconds (process running for 9.387)
2025-07-01 14:27:51 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-01 14:27:51 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-01 14:27:51 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-01 14:27:51 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/register
2025-07-01 14:27:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-07-01 14:27:51 [http-nio-8080-exec-5] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/register with Authorization header: null
2025-07-01 14:27:51 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/auth/register
2025-07-01 14:27:51 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/register
2025-07-01 14:27:51 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:27:51 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-07-01 14:27:51 [http-nio-8080-exec-5] INFO  c.h.medical.controller.AuthAPI - Processing registration request for email: voyennhi2060@gmail.com
2025-07-01 14:27:52 [http-nio-8080-exec-5] INFO  c.h.medical.service.EmailService - Attempting to send OTP email to: voyennhi2060@gmail.com
2025-07-01 14:27:58 [http-nio-8080-exec-5] INFO  c.h.medical.service.EmailService - OTP email sent successfully to: voyennhi2060@gmail.com
2025-07-01 14:28:08 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/register
2025-07-01 14:28:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/register
2025-07-01 14:28:08 [http-nio-8080-exec-4] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/register with Authorization header: null
2025-07-01 14:28:08 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/auth/register
2025-07-01 14:28:08 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/register
2025-07-01 14:28:08 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:28:08 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/register
2025-07-01 14:28:08 [http-nio-8080-exec-4] INFO  c.h.medical.controller.AuthAPI - Processing registration request for email: voyennhi2060@gmail.com
2025-07-01 14:29:19 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/auth/login
2025-07-01 14:29:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-07-01 14:29:19 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/login with Authorization header: null
2025-07-01 14:29:19 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/auth/login
2025-07-01 14:29:19 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/login
2025-07-01 14:29:19 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:29:19 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-07-01 14:29:19 [http-nio-8080-exec-6] INFO  c.h.medical.controller.AuthAPI - Processing login request for email: vymainguyen1908@gmail.com
2025-07-01 14:29:19 [http-nio-8080-exec-6] INFO  c.h.medical.controller.AuthAPI - Generated JWT for user vymainguyen1908@gmail.com: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 14:29:19 [http-nio-8080-exec-6] DEBUG c.h.medical.controller.AuthAPI - Token claims - username: vymainguyen1908@gmail.com, role: PATIENT, fullName: Nguyen Mai Tuong Vy, expiresAt: Wed Jul 02 14:29:19 GMT+07:00 2025
2025-07-01 14:29:21 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:29:21 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:29:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:29:21 [http-nio-8080-exec-9] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 14:29:21 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 14:29:21 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 14:29:21 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:29:21 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:29:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:29:21 [http-nio-8080-exec-10] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 14:29:21 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 14:29:21 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 14:29:21 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:29:21 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:29:24 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors/1/schedule
2025-07-01 14:29:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors/1/schedule
2025-07-01 14:29:24 [http-nio-8080-exec-5] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors/1/schedule with Authorization header: null
2025-07-01 14:29:24 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors/1/schedule
2025-07-01 14:29:24 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors/1/schedule
2025-07-01 14:29:24 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:29:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors/1/schedule
2025-07-01 14:29:24 [http-nio-8080-exec-5] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'date' for method parameter type String is not present]
2025-07-01 14:29:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 14:29:24 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 14:29:24 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:29:34 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors/1/schedule
2025-07-01 14:29:34 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors/1/schedule
2025-07-01 14:29:34 [http-nio-8080-exec-4] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors/1/schedule with Authorization header: null
2025-07-01 14:29:34 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors/1/schedule
2025-07-01 14:29:34 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors/1/schedule
2025-07-01 14:29:34 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:29:34 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors/1/schedule
2025-07-01 14:29:34 [http-nio-8080-exec-4] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'date' for method parameter type String is not present]
2025-07-01 14:29:34 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 14:29:34 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 14:29:34 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:29:40 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors/2/schedule
2025-07-01 14:29:40 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors/2/schedule
2025-07-01 14:29:40 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors/2/schedule with Authorization header: null
2025-07-01 14:29:40 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors/2/schedule
2025-07-01 14:29:40 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors/2/schedule
2025-07-01 14:29:40 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:29:40 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors/2/schedule
2025-07-01 14:29:40 [http-nio-8080-exec-6] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'date' for method parameter type String is not present]
2025-07-01 14:29:40 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 14:29:40 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 14:29:40 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:29:53 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 14:29:53 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 14:29:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 14:29:53 [http-nio-8080-exec-9] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 14:29:53 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 14:29:53 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 14:29:53 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 14:29:53 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 14:29:53 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 14:29:53 [http-nio-8080-exec-9] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 14:29:53 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 14:29:53 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 14:29:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 14:29:54 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 14:29:54 [http-nio-8080-exec-10] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 14:29:54 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 14:29:54 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 14:29:54 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 14:29:54 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 14:29:54 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 14:29:54 [http-nio-8080-exec-10] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 14:29:54 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 14:29:54 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 14:29:54 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 14:32:06 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:32:06 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:32:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:32:06 [http-nio-8080-exec-2] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 14:32:06 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 14:32:06 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 14:32:06 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:32:06 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:32:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:32:06 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 14:32:06 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 14:32:06 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 14:32:06 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:32:06 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:32:07 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors/1/schedule
2025-07-01 14:32:07 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors/1/schedule
2025-07-01 14:32:07 [http-nio-8080-exec-8] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors/1/schedule with Authorization header: null
2025-07-01 14:32:07 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors/1/schedule
2025-07-01 14:32:07 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors/1/schedule
2025-07-01 14:32:07 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:32:07 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors/1/schedule
2025-07-01 14:32:07 [http-nio-8080-exec-8] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'date' for method parameter type String is not present]
2025-07-01 14:32:07 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 14:32:07 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 14:32:07 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:32:53 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors/1/schedule
2025-07-01 14:32:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors/1/schedule
2025-07-01 14:32:53 [http-nio-8080-exec-10] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors/1/schedule with Authorization header: null
2025-07-01 14:32:53 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors/1/schedule
2025-07-01 14:32:53 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors/1/schedule
2025-07-01 14:32:53 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:32:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors/1/schedule
2025-07-01 14:32:53 [http-nio-8080-exec-10] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'date' for method parameter type String is not present]
2025-07-01 14:32:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 14:32:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 14:32:53 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:33:54 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 14:33:54 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 14:33:54 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 14:33:54 [http-nio-8080-exec-3] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 14:33:54 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 14:33:54 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 14:33:54 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 14:33:54 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 14:33:54 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 14:33:54 [http-nio-8080-exec-3] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 14:33:54 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 14:33:54 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 14:33:54 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 14:33:54 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 14:33:54 [http-nio-8080-exec-4] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 14:33:54 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 14:33:54 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 14:33:54 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 14:33:54 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 14:33:54 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 14:33:54 [http-nio-8080-exec-4] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 14:33:54 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 14:33:54 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 14:33:54 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 14:34:00 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:34:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:34:00 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:34:00 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 14:34:00 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 14:34:00 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 14:34:00 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:34:00 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:34:00 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:34:00 [http-nio-8080-exec-8] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 14:34:00 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 14:34:00 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 14:34:00 [http-nio-8080-exec-8] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:34:00 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 14:34:00 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors/1/schedule
2025-07-01 14:34:00 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors/1/schedule
2025-07-01 14:34:00 [http-nio-8080-exec-10] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors/1/schedule with Authorization header: null
2025-07-01 14:34:00 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors/1/schedule
2025-07-01 14:34:00 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors/1/schedule
2025-07-01 14:34:00 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:34:00 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors/1/schedule
2025-07-01 14:34:00 [http-nio-8080-exec-10] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'date' for method parameter type String is not present]
2025-07-01 14:34:00 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 14:34:00 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 14:34:00 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:53:27 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=19m17s738ms852µs400ns).
2025-07-01 14:53:59 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors/1/schedule
2025-07-01 14:53:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors/1/schedule
2025-07-01 14:53:59 [http-nio-8080-exec-3] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors/1/schedule with Authorization header: null
2025-07-01 14:53:59 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors/1/schedule
2025-07-01 14:53:59 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors/1/schedule
2025-07-01 14:53:59 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:53:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors/1/schedule
2025-07-01 14:53:59 [http-nio-8080-exec-3] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'date' for method parameter type String is not present]
2025-07-01 14:53:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 14:53:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 14:53:59 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 14:55:44 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 14:55:44 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 14:55:44 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 14:55:44 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 14:55:44 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-01 15:40:59 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 21144 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 15:40:59 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 15:40:59 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 15:41:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 15:41:00 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 48 ms. Found 6 JPA repository interfaces.
2025-07-01 15:41:00 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 15:41:00 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 15:41:00 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 15:41:00 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 15:41:00 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1245 ms
2025-07-01 15:41:00 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 15:41:00 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 15:41:01 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 15:41:01 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 15:41:01 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 15:41:01 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 15:41:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 15:41:01 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: a70b2fd0-37cb-41a4-a56d-eb9636d0042d
2025-07-01 15:41:01 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 15:41:01 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 15:41:01 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 15:41:02 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 15:41:03 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 15:41:03 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 15:41:04 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 15:41:04 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 15:41:04 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 15:41:04 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 15:41:04 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 15:41:04 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 15:41:04 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 15:41:04 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 5.324 seconds (process running for 5.934)
2025-07-01 15:41:09 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-01 15:41:09 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-01 15:41:09 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-01 15:41:09 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:41:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:41:09 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:41:09 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 15:41:09 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 15:41:09 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 15:41:09 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 15:41:09 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:41:09 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:41:09 [http-nio-8080-exec-4] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 15:41:09 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 15:41:09 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 15:41:09 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 15:41:09 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:41:25 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 15:41:25 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 15:41:25 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 15:41:25 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:41:25 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:41:25 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 15:41:25 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 15:41:25 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 15:41:25 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:41:25 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:41:25 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 15:41:25 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 15:41:25 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 15:41:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 15:41:25 [http-nio-8080-exec-8] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:41:25 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:41:25 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 15:41:25 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 15:41:25 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 15:41:25 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:41:25 [http-nio-8080-exec-8] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:41:25 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 15:41:25 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 15:41:25 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 15:49:55 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 15:49:55 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 15:49:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 15:49:55 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:49:55 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:49:55 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 15:49:55 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 15:49:55 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 15:49:55 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:49:55 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:49:55 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 15:49:55 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 15:49:55 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 15:49:55 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 15:49:55 [http-nio-8080-exec-4] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:49:55 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:49:55 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 15:49:55 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 15:49:55 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 15:49:55 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:49:55 [http-nio-8080-exec-4] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:49:55 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 15:49:55 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 15:49:55 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 15:49:59 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 15:49:59 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 15:49:59 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 15:49:59 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 15:49:59 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-01 15:50:01 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 15192 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 15:50:01 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 15:50:01 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 15:50:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 15:50:02 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 34 ms. Found 6 JPA repository interfaces.
2025-07-01 15:50:02 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 15:50:02 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 15:50:02 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 15:50:02 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 15:50:02 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 956 ms
2025-07-01 15:50:02 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 15:50:02 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 15:50:02 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 15:50:02 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 15:50:03 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 15:50:03 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 15:50:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 15:50:03 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: dea866ae-1a5a-4cfb-aa6a-62f48975ac46
2025-07-01 15:50:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 15:50:03 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 15:50:03 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 15:50:04 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 15:50:04 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 15:50:05 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 15:50:05 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 15:50:05 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 15:50:05 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 15:50:05 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 15:50:05 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 15:50:05 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 15:50:06 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 15:50:06 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 4.698 seconds (process running for 5.321)
2025-07-01 15:50:09 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-01 15:50:09 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-01 15:50:09 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-01 15:50:09 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 15:50:09 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 15:50:09 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 15:50:09 [http-nio-8080-exec-5] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:50:09 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:50:09 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 15:50:09 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 15:50:09 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 15:50:09 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:50:09 [http-nio-8080-exec-5] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:50:09 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 15:50:09 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 15:50:09 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 15:50:10 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 15:50:10 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:50:10 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 15:50:10 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 15:50:10 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 15:50:10 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 15:50:10 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:50:10 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 15:50:10 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 15:50:10 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 15:50:10 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 15:51:09 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:51:09 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:51:09 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:51:09 [http-nio-8080-exec-9] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 15:51:09 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 15:51:09 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 15:51:09 [http-nio-8080-exec-9] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 15:51:09 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:51:09 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:51:09 [http-nio-8080-exec-10] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors with Authorization header: null
2025-07-01 15:51:09 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors
2025-07-01 15:51:09 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors
2025-07-01 15:51:09 [http-nio-8080-exec-10] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 15:51:09 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors?page=0&size=10&search=&searchBy=name
2025-07-01 15:51:13 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/doctors/1/schedule
2025-07-01 15:51:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/doctors/1/schedule
2025-07-01 15:51:13 [http-nio-8080-exec-1] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/doctors/1/schedule with Authorization header: null
2025-07-01 15:51:13 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/doctors/1/schedule
2025-07-01 15:51:13 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/doctors/1/schedule
2025-07-01 15:51:13 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 15:51:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/doctors/1/schedule
2025-07-01 15:51:13 [http-nio-8080-exec-1] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.bind.MissingServletRequestParameterException: Required request parameter 'date' for method parameter type String is not present]
2025-07-01 15:51:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 15:51:13 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 15:51:13 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 16:13:27 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 16:13:27 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 16:13:27 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 16:13:27 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 16:13:27 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-01 16:18:01 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 868 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 16:18:01 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 16:18:01 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 16:18:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 16:18:01 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 56 ms. Found 6 JPA repository interfaces.
2025-07-01 16:18:02 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 16:18:02 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 16:18:02 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 16:18:02 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 16:18:02 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1033 ms
2025-07-01 16:18:02 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 16:18:02 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 16:18:02 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 16:18:02 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 16:18:02 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 16:18:02 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 16:18:02 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 16:18:03 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 90431d31-a850-4d03-92ec-50a06819b399
2025-07-01 16:18:03 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 16:18:03 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 16:18:03 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 16:18:04 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 16:18:04 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table appointments 
       add appointment_type NVARCHAR(50) COLLATE Vietnamese_CI_AS not null" via JDBC [ALTER TABLE only allows columns to be added that can contain nulls, or have a DEFAULT definition specified, or the column being added is an identity or timestamp column, or alternatively if none of the previous conditions are satisfied the table must be empty to allow addition of this column. Column 'appointment_type' cannot be added to non-empty table 'appointments' because it does not satisfy these conditions.]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table appointments 
       add appointment_type NVARCHAR(50) COLLATE Vietnamese_CI_AS not null" via JDBC [ALTER TABLE only allows columns to be added that can contain nulls, or have a DEFAULT definition specified, or the column being added is an identity or timestamp column, or alternatively if none of the previous conditions are satisfied the table must be empty to allow addition of this column. Column 'appointment_type' cannot be added to non-empty table 'appointments' because it does not satisfy these conditions.]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:576)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:516)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.migrateTable(AbstractSchemaMigrator.java:334)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:84)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:233)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.hivmedical.medical.MedicalApplication.main(MedicalApplication.java:10)
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: ALTER TABLE only allows columns to be added that can contain nulls, or have a DEFAULT definition specified, or the column being added is an identity or timestamp column, or alternatively if none of the previous conditions are satisfied the table must be empty to allow addition of this column. Column 'appointment_type' cannot be added to non-empty table 'appointments' because it does not satisfy these conditions.
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:276)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1787)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:975)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:869)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7745)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:4700)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:321)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:253)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.execute(SQLServerStatement.java:842)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 37 common frames omitted
2025-07-01 16:18:04 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table appointments 
       add service_id bigint not null" via JDBC [ALTER TABLE only allows columns to be added that can contain nulls, or have a DEFAULT definition specified, or the column being added is an identity or timestamp column, or alternatively if none of the previous conditions are satisfied the table must be empty to allow addition of this column. Column 'service_id' cannot be added to non-empty table 'appointments' because it does not satisfy these conditions.]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table appointments 
       add service_id bigint not null" via JDBC [ALTER TABLE only allows columns to be added that can contain nulls, or have a DEFAULT definition specified, or the column being added is an identity or timestamp column, or alternatively if none of the previous conditions are satisfied the table must be empty to allow addition of this column. Column 'service_id' cannot be added to non-empty table 'appointments' because it does not satisfy these conditions.]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:576)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:516)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.migrateTable(AbstractSchemaMigrator.java:334)
	at org.hibernate.tool.schema.internal.GroupedSchemaMigratorImpl.performTablesMigration(GroupedSchemaMigratorImpl.java:84)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:233)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.hivmedical.medical.MedicalApplication.main(MedicalApplication.java:10)
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: ALTER TABLE only allows columns to be added that can contain nulls, or have a DEFAULT definition specified, or the column being added is an identity or timestamp column, or alternatively if none of the previous conditions are satisfied the table must be empty to allow addition of this column. Column 'service_id' cannot be added to non-empty table 'appointments' because it does not satisfy these conditions.
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:276)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1787)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:975)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:869)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7745)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:4700)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:321)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:253)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.execute(SQLServerStatement.java:842)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 37 common frames omitted
2025-07-01 16:18:04 [main] WARN  o.h.t.s.i.ExceptionHandlerLoggedImpl - GenerationTarget encountered exception accepting command : Error executing DDL "
    alter table appointments 
       add constraint FK5iltr7k9pows18hk8nc101vc1 
       foreign key (service_id) 
       references services" via JDBC [Foreign key 'FK5iltr7k9pows18hk8nc101vc1' references invalid column 'service_id' in referencing table 'appointments'.]
org.hibernate.tool.schema.spi.CommandAcceptanceException: Error executing DDL "
    alter table appointments 
       add constraint FK5iltr7k9pows18hk8nc101vc1 
       foreign key (service_id) 
       references services" via JDBC [Foreign key 'FK5iltr7k9pows18hk8nc101vc1' references invalid column 'service_id' in referencing table 'appointments'.]
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:94)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlString(AbstractSchemaMigrator.java:576)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applySqlStrings(AbstractSchemaMigrator.java:516)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.applyForeignKeys(AbstractSchemaMigrator.java:448)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.performMigration(AbstractSchemaMigrator.java:269)
	at org.hibernate.tool.schema.internal.AbstractSchemaMigrator.doMigration(AbstractSchemaMigrator.java:112)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.performDatabaseAction(SchemaManagementToolCoordinator.java:280)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.lambda$process$5(SchemaManagementToolCoordinator.java:144)
	at java.base/java.util.HashMap.forEach(HashMap.java:1430)
	at org.hibernate.tool.schema.spi.SchemaManagementToolCoordinator.process(SchemaManagementToolCoordinator.java:141)
	at org.hibernate.boot.internal.SessionFactoryObserverForSchemaExport.sessionFactoryCreated(SessionFactoryObserverForSchemaExport.java:37)
	at org.hibernate.internal.SessionFactoryObserverChain.sessionFactoryCreated(SessionFactoryObserverChain.java:35)
	at org.hibernate.internal.SessionFactoryImpl.<init>(SessionFactoryImpl.java:324)
	at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:463)
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1517)
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:66)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:419)
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:400)
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:207)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:970)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.hivmedical.medical.MedicalApplication.main(MedicalApplication.java:10)
Caused by: com.microsoft.sqlserver.jdbc.SQLServerException: Foreign key 'FK5iltr7k9pows18hk8nc101vc1' references invalid column 'service_id' in referencing table 'appointments'.
	at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDatabaseError(SQLServerException.java:276)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.getNextResult(SQLServerStatement.java:1787)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.doExecuteStatement(SQLServerStatement.java:975)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement$StmtExecCmd.doExecute(SQLServerStatement.java:869)
	at com.microsoft.sqlserver.jdbc.TDSCommand.execute(IOBuffer.java:7745)
	at com.microsoft.sqlserver.jdbc.SQLServerConnection.executeCommand(SQLServerConnection.java:4700)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeCommand(SQLServerStatement.java:321)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.executeStatement(SQLServerStatement.java:253)
	at com.microsoft.sqlserver.jdbc.SQLServerStatement.execute(SQLServerStatement.java:842)
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:95)
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java)
	at org.hibernate.tool.schema.internal.exec.GenerationTargetToDatabase.accept(GenerationTargetToDatabase.java:80)
	... 36 common frames omitted
2025-07-01 16:18:04 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 16:18:05 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 16:18:05 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 16:18:05 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 16:18:05 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 16:18:05 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 16:18:05 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 16:18:05 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 16:18:06 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 16:18:06 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 5.196 seconds (process running for 5.668)
2025-07-01 16:25:40 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 16:25:40 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 16:25:40 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 16:25:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 16:25:40 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-01 16:27:29 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 11916 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 16:27:29 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 16:27:29 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 16:27:30 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 16:27:30 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 46 ms. Found 6 JPA repository interfaces.
2025-07-01 16:27:30 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 16:27:30 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 16:27:30 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 16:27:30 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 16:27:30 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1039 ms
2025-07-01 16:27:30 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 16:27:30 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 16:27:31 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 16:27:31 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 16:27:31 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 16:27:31 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 16:27:31 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 16:27:31 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: a8e2c416-201d-4c41-adf7-19850dd73b4e
2025-07-01 16:27:31 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 16:27:31 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 16:27:31 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 16:27:32 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 16:27:33 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 16:27:33 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 16:27:34 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 16:27:34 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 16:27:34 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 16:27:34 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 16:27:34 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 16:27:34 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 16:27:34 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 16:27:34 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 5.101 seconds (process running for 5.534)
2025-07-01 16:29:21 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-01 16:29:21 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-01 16:29:21 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 0 ms
2025-07-01 16:29:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-07-01 16:29:21 [http-nio-8080-exec-1] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/login with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwicm9sZSI6IkFETUlOIiwiZXhwIjoxNzUxMzYyMTY3fQ.ym1a3TG05yuT1wTBXY_zMbacVMMOsBuvVCL0e1LS1-E
2025-07-01 16:29:21 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwicm9sZSI6IkFETUlOIiwiZXhwIjoxNzUxMzYyMTY3fQ.ym1a3TG05yuT1wTBXY_zMbacVMMOsBuvVCL0e1LS1-E
2025-07-01 16:29:21 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 16:29:21 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 16:29:21 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 16:29:21 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: admin, role: ADMIN
2025-07-01 16:29:21 [http-nio-8080-exec-1] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/auth/login - username: admin, role: ADMIN
2025-07-01 16:29:21 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: admin with role: ADMIN for request to /api/auth/login
2025-07-01 16:29:21 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/login
2025-07-01 16:29:21 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-07-01 16:29:21 [http-nio-8080-exec-1] INFO  c.h.medical.controller.AuthAPI - Processing login request for email: admin@example.com
2025-07-01 16:29:21 [http-nio-8080-exec-1] INFO  c.h.medical.controller.AuthAPI - Generated JWT for user admin: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwicm9sZSI6IkFETUlOIiwiZnVsbE5hbWUiOiJhZG1pbiIsImV4cCI6MTc1MTQ0ODU2MX0.0moN93Wj3aHhAD2YTDQEXeQa9m_QgnG5_KSoSXpTuGI
2025-07-01 16:29:21 [http-nio-8080-exec-1] DEBUG c.h.medical.controller.AuthAPI - Token claims - username: admin, role: ADMIN, fullName: null, expiresAt: Wed Jul 02 16:29:21 GMT+07:00 2025
2025-07-01 16:31:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-07-01 16:31:08 [http-nio-8080-exec-5] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/login with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwicm9sZSI6IkFETUlOIiwiZXhwIjoxNzUxMzYyMTY3fQ.ym1a3TG05yuT1wTBXY_zMbacVMMOsBuvVCL0e1LS1-E
2025-07-01 16:31:08 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6ImFkbWluIiwicm9sZSI6IkFETUlOIiwiZXhwIjoxNzUxMzYyMTY3fQ.ym1a3TG05yuT1wTBXY_zMbacVMMOsBuvVCL0e1LS1-E
2025-07-01 16:31:08 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 16:31:08 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 16:31:08 [http-nio-8080-exec-5] ERROR c.h.m.s.JwtAuthenticationFilter - JWT verification failed for request to /api/auth/login: The Token has expired on 2025-07-01T09:29:27Z.
com.auth0.jwt.exceptions.TokenExpiredException: The Token has expired on 2025-07-01T09:29:27Z.
	at com.auth0.jwt.JWTVerifier$BaseVerification.assertValidInstantClaim(JWTVerifier.java:346)
	at com.auth0.jwt.JWTVerifier$BaseVerification.lambda$addMandatoryClaimChecks$17(JWTVerifier.java:308)
	at com.auth0.jwt.JWTVerifier$BaseVerification$1.verify(JWTVerifier.java:412)
	at com.auth0.jwt.JWTVerifier.verifyClaims(JWTVerifier.java:489)
	at com.auth0.jwt.JWTVerifier.verify(JWTVerifier.java:471)
	at com.auth0.jwt.JWTVerifier.verify(JWTVerifier.java:452)
	at com.hivmedical.medical.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:50)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-07-01 16:31:36 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-07-01 16:31:36 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/login with Authorization header: 
2025-07-01 16:31:36 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/auth/login
2025-07-01 16:31:36 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/login
2025-07-01 16:31:36 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 16:31:36 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-07-01 16:31:36 [http-nio-8080-exec-7] INFO  c.h.medical.controller.AuthAPI - Processing login request for email: Vymainguyen1908@gmail.com
2025-07-01 16:31:36 [http-nio-8080-exec-7] INFO  c.h.medical.controller.AuthAPI - Generated JWT for user vymainguyen1908@gmail.com: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:31:36 [http-nio-8080-exec-7] DEBUG c.h.medical.controller.AuthAPI - Token claims - username: vymainguyen1908@gmail.com, role: PATIENT, fullName: Nguyen Mai Tuong Vy, expiresAt: Wed Jul 02 16:31:36 GMT+07:00 2025
2025-07-01 16:32:31 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 16:32:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing OPTIONS /api/services
2025-07-01 16:32:31 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 16:32:31 [http-nio-8080-exec-9] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 16:32:31 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 16:32:31 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 16:32:31 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 16:32:31 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 16:32:31 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:32:31 [http-nio-8080-exec-9] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:32:31 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 16:32:31 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 16:32:31 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 16:32:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services
2025-07-01 16:32:31 [http-nio-8080-exec-10] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 16:32:31 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0MTM1OX0.P8NyMezgpdK_-lmA1FdJt8hKtDLZrZR8K1s-kVVGdTI
2025-07-01 16:32:31 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 16:32:31 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 16:32:31 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 16:32:31 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:32:31 [http-nio-8080-exec-10] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/services - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:32:31 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/services
2025-07-01 16:32:31 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services
2025-07-01 16:32:31 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/appointments
2025-07-01 16:33:12 [http-nio-8080-exec-3] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/appointments with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:33:12 [http-nio-8080-exec-3] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/appointments - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/appointments
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/appointments
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/appointments
2025-07-01 16:33:12 [http-nio-8080-exec-3] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type 'text/plain;charset=UTF-8' is not supported]
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-07-01 16:33:12 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/me
2025-07-01 16:33:35 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/me with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:33:35 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/me - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/me
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/me
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/me
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 16:33:35 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/me
2025-07-01 16:33:49 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/me with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:33:49 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/me - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/me
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/me
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/me
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 16:33:49 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 16:37:10 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 16:37:10 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 16:37:10 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 16:37:10 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 16:37:10 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-01 16:43:05 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 27628 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 16:43:05 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 16:43:05 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 16:43:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 16:43:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 47 ms. Found 6 JPA repository interfaces.
2025-07-01 16:43:06 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 16:43:06 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 16:43:06 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 16:43:06 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 16:43:06 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1196 ms
2025-07-01 16:43:06 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 16:43:06 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 16:43:06 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 16:43:06 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 16:43:06 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 16:43:06 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 16:43:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 16:43:07 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 023d77a5-8286-43da-9594-4238330850e9
2025-07-01 16:43:07 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 16:43:07 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 16:43:07 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 16:43:07 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 16:43:08 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 16:43:08 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 16:43:09 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 16:43:09 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 16:43:09 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 16:43:09 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 16:43:09 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 16:43:09 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 16:43:09 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 16:43:09 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 4.842 seconds (process running for 5.383)
2025-07-01 16:46:23 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-01 16:46:23 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-01 16:46:23 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-01 16:46:23 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services/type/FOLLOW_UP
2025-07-01 16:46:23 [http-nio-8080-exec-2] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services/type/FOLLOW_UP with Authorization header: null
2025-07-01 16:46:23 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/services/type/FOLLOW_UP
2025-07-01 16:46:23 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services/type/FOLLOW_UP
2025-07-01 16:46:23 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 16:46:23 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services/type/FOLLOW_UP
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/appointments
2025-07-01 16:50:19 [http-nio-8080-exec-5] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/appointments with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:50:19 [http-nio-8080-exec-5] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/appointments - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/appointments
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/appointments
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/appointments
2025-07-01 16:50:19 [http-nio-8080-exec-5] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 16:50:19 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/appointments
2025-07-01 16:50:31 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/appointments with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:50:31 [http-nio-8080-exec-6] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/appointments - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/appointments
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/appointments
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/appointments
2025-07-01 16:50:31 [http-nio-8080-exec-6] WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpRequestMethodNotSupportedException: Request method 'GET' is not supported]
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 16:50:31 [http-nio-8080-exec-6] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 16:58:06 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 16:58:06 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 16:58:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 16:58:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 16:58:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-01 16:58:09 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 10036 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 16:58:09 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 16:58:09 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 16:58:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 16:58:09 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 35 ms. Found 6 JPA repository interfaces.
2025-07-01 16:58:10 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 16:58:10 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 16:58:10 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 16:58:10 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 16:58:10 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1006 ms
2025-07-01 16:58:10 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 16:58:10 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 16:58:10 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 16:58:10 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 16:58:10 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 16:58:10 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 16:58:10 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 16:58:11 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 0509a53e-2fb1-45f4-9272-19a4e6067ea3
2025-07-01 16:58:11 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 16:58:11 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 16:58:11 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 16:58:12 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 16:58:12 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 16:58:12 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 16:58:13 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 16:58:13 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 16:58:13 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 16:58:13 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 16:58:13 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 16:58:13 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 16:58:13 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 16:58:13 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 4.867 seconds (process running for 5.324)
2025-07-01 17:01:00 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-01 17:01:00 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-01 17:01:00 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/appointment/me
2025-07-01 17:01:00 [http-nio-8080-exec-2] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/appointment/me with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 17:01:00 [http-nio-8080-exec-2] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/appointment/me - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/appointment/me
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/appointment/me
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/appointment/me
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Securing GET /error
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG o.s.security.web.FilterChainProxy - Secured GET /error
2025-07-01 17:01:00 [http-nio-8080-exec-2] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 17:01:11 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/appointments/me
2025-07-01 17:01:11 [http-nio-8080-exec-3] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/appointments/me with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 17:01:11 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ0ODY5Nn0.PKh0RfkmhRBr_1hKr_WEM6xDS_njfKBGqofy1JEhK20
2025-07-01 17:01:11 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 17:01:11 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 17:01:11 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 17:01:11 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 17:01:11 [http-nio-8080-exec-3] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/appointments/me - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 17:01:11 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/appointments/me
2025-07-01 17:01:11 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/appointments/me
2025-07-01 17:01:11 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/appointments/me
2025-07-01 17:02:31 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 17:02:31 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 17:02:31 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 17:02:31 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 17:02:31 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-01 20:56:03 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 14380 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 20:56:03 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 20:56:03 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 20:56:04 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 20:56:05 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 86 ms. Found 6 JPA repository interfaces.
2025-07-01 20:56:05 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 20:56:05 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 20:56:05 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 20:56:05 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 20:56:05 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2074 ms
2025-07-01 20:56:05 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 20:56:05 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 20:56:06 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 20:56:06 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 20:56:06 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 20:56:06 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 20:56:06 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 20:56:07 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: b648fff3-5cb9-479c-a674-e5d9eefd57b1
2025-07-01 20:56:07 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 20:56:07 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 20:56:07 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 20:56:08 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 20:56:09 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 20:56:10 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 20:56:11 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 20:56:11 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 20:56:11 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 20:56:11 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 20:56:12 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 20:56:12 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 20:56:12 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 20:56:12 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 9.405 seconds (process running for 10.353)
2025-07-01 20:56:58 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-01 20:56:58 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-01 20:56:58 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-07-01 20:56:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/login
2025-07-01 20:56:58 [http-nio-8080-exec-1] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/login with Authorization header: 
2025-07-01 20:56:58 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/auth/login
2025-07-01 20:56:58 [http-nio-8080-exec-1] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/login
2025-07-01 20:56:58 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 20:56:58 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/login
2025-07-01 20:56:59 [http-nio-8080-exec-1] INFO  c.h.medical.controller.AuthAPI - Processing login request for email: Vymainguyen1908@gmail.com
2025-07-01 20:56:59 [http-nio-8080-exec-1] INFO  c.h.medical.controller.AuthAPI - Generated JWT for user vymainguyen1908@gmail.com: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 20:56:59 [http-nio-8080-exec-1] DEBUG c.h.medical.controller.AuthAPI - Token claims - username: vymainguyen1908@gmail.com, role: PATIENT, fullName: Nguyen Mai Tuong Vy, expiresAt: Wed Jul 02 20:56:59 GMT+07:00 2025
2025-07-01 20:58:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/services/type/FOLLOW_UP
2025-07-01 20:58:08 [http-nio-8080-exec-5] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/services/type/FOLLOW_UP with Authorization header: null
2025-07-01 20:58:08 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/services/type/FOLLOW_UP
2025-07-01 20:58:08 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/services/type/FOLLOW_UP
2025-07-01 20:58:08 [http-nio-8080-exec-5] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 20:58:08 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/services/type/FOLLOW_UP
2025-07-01 20:59:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/appointments
2025-07-01 20:59:19 [http-nio-8080-exec-8] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/appointments with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 20:59:19 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 20:59:19 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 20:59:19 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 20:59:19 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 20:59:19 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 20:59:19 [http-nio-8080-exec-8] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/appointments - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 20:59:19 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/appointments
2025-07-01 20:59:19 [http-nio-8080-exec-8] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/appointments
2025-07-01 20:59:19 [http-nio-8080-exec-8] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/appointments
2025-07-01 21:00:13 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/appointments
2025-07-01 21:00:13 [http-nio-8080-exec-9] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/appointments with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 21:00:13 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 21:00:13 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 21:00:13 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 21:00:13 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 21:00:13 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 21:00:13 [http-nio-8080-exec-9] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/appointments - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 21:00:13 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/appointments
2025-07-01 21:00:13 [http-nio-8080-exec-9] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/appointments
2025-07-01 21:00:13 [http-nio-8080-exec-9] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/appointments
2025-07-01 21:00:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/appointments
2025-07-01 21:00:53 [http-nio-8080-exec-10] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/appointments with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 21:00:53 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 21:00:53 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 21:00:53 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 21:00:53 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 21:00:53 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 21:00:53 [http-nio-8080-exec-10] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/appointments - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 21:00:53 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/appointments
2025-07-01 21:00:53 [http-nio-8080-exec-10] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/appointments
2025-07-01 21:00:53 [http-nio-8080-exec-10] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/appointments
2025-07-01 21:02:09 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/appointments
2025-07-01 21:02:09 [http-nio-8080-exec-3] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/appointments with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 21:02:09 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 21:02:09 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 21:02:09 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 21:02:09 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 21:02:09 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 21:02:09 [http-nio-8080-exec-3] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/appointments - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 21:02:09 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/appointments
2025-07-01 21:02:09 [http-nio-8080-exec-3] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/appointments
2025-07-01 21:02:09 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/appointments
2025-07-01 21:04:18 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Securing GET /api/appointments/me
2025-07-01 21:04:18 [http-nio-8080-exec-5] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/appointments/me with Authorization header: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 21:04:18 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Verifying JWT token: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VybmFtZSI6InZ5bWFpbmd1eWVuMTkwOEBnbWFpbC5jb20iLCJyb2xlIjoiUEFUSUVOVCIsImZ1bGxOYW1lIjoiTmd1eWVuIE1haSBUdW9uZyBWeSIsImV4cCI6MTc1MTQ2NDYxOX0.zSXOZwgB9dPGgew4oy6e2t9bwx4cIhoYmhNoXOaoypI
2025-07-01 21:04:18 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Using secret key: 1234567890
2025-07-01 21:04:18 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - JWT verifier initialized
2025-07-01 21:04:18 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Token verification completed
2025-07-01 21:04:18 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Extracted claims - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 21:04:18 [http-nio-8080-exec-5] INFO  c.h.m.s.JwtAuthenticationFilter - Token verified for request to /api/appointments/me - username: vymainguyen1908@gmail.com, role: PATIENT
2025-07-01 21:04:18 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Authentication set for user: vymainguyen1908@gmail.com with role: PATIENT for request to /api/appointments/me
2025-07-01 21:04:18 [http-nio-8080-exec-5] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/appointments/me
2025-07-01 21:04:18 [http-nio-8080-exec-5] DEBUG o.s.security.web.FilterChainProxy - Secured GET /api/appointments/me
2025-07-01 21:11:18 [HikariPool-1:housekeeper] WARN  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=5m40s826ms555µs).
2025-07-01 21:21:47 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 21:21:47 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 21:21:47 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 21:21:47 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 21:21:47 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-01 22:06:47 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 9756 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 22:06:47 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 22:06:47 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 22:06:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 22:06:48 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 73 ms. Found 6 JPA repository interfaces.
2025-07-01 22:06:49 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 22:06:49 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 22:06:49 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 22:06:49 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 22:06:49 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1951 ms
2025-07-01 22:06:49 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 22:06:49 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 22:06:49 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 22:06:50 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 22:06:50 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 22:06:50 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 22:06:50 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 22:06:51 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 4dd7fae2-8e14-4c42-aa5c-b8aca0800ef7
2025-07-01 22:06:51 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 22:06:51 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 22:06:51 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 22:06:52 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 22:06:53 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 22:06:53 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 22:06:54 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 22:06:54 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 22:06:54 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 22:06:54 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 22:06:55 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 22:06:55 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 22:06:55 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 22:06:55 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 8.629 seconds (process running for 9.481)
2025-07-01 22:08:59 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-01 22:08:59 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-01 22:08:59 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-07-01 22:08:59 [http-nio-8080-exec-3] DEBUG o.s.s.w.f.HttpStatusRequestRejectedHandler - Rejecting request due to: The request was rejected because the URL contained a potentially malicious String "//"
org.springframework.security.web.firewall.RequestRejectedException: The request was rejected because the URL contained a potentially malicious String "//"
	at org.springframework.security.web.firewall.StrictHttpFirewall.rejectedBlocklistedUrls(StrictHttpFirewall.java:548)
	at org.springframework.security.web.firewall.StrictHttpFirewall.getFirewalledRequest(StrictHttpFirewall.java:518)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-07-01 22:08:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-07-01 22:08:59 [http-nio-8080-exec-3] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 22:08:59 [http-nio-8080-exec-3] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-07-01 22:12:46 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 22:12:46 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 22:12:46 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 22:12:46 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 22:12:46 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-07-01 22:12:51 [main] INFO  c.h.medical.MedicalApplication - Starting MedicalApplication using Java 24.0.1 with PID 6984 (D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend\target\classes started by ACER in D:\CN5\SWP391\Be_MedicalHIV\hiv-treatment-backend)
2025-07-01 22:12:51 [main] DEBUG c.h.medical.MedicalApplication - Running with Spring Boot v3.5.4-SNAPSHOT, Spring v6.2.9-SNAPSHOT
2025-07-01 22:12:51 [main] INFO  c.h.medical.MedicalApplication - No active profile set, falling back to 1 default profile: "default"
2025-07-01 22:12:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-07-01 22:12:52 [main] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 89 ms. Found 6 JPA repository interfaces.
2025-07-01 22:12:53 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-07-01 22:12:53 [main] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-07-01 22:12:53 [main] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.42]
2025-07-01 22:12:53 [main] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-07-01 22:12:53 [main] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2086 ms
2025-07-01 22:12:53 [main] INFO  c.h.m.s.JwtAuthenticationFilter - JwtAuthenticationFilter initialized with secret: 1234567890
2025-07-01 22:12:53 [main] DEBUG c.h.m.s.JwtAuthenticationFilter - Filter 'jwtAuthenticationFilter' configured for use
2025-07-01 22:12:54 [main] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-07-01 22:12:54 [main] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.18.Final
2025-07-01 22:12:54 [main] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-07-01 22:12:54 [main] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-07-01 22:12:54 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-07-01 22:12:55 [main] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection ConnectionID:1 ClientConnectionId: 8d179675-2e2a-4b19-a7a1-9c04c9017ce4
2025-07-01 22:12:55 [main] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-07-01 22:12:55 [main] WARN  org.hibernate.orm.deprecation - HHH90000025: SQLServerDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-07-01 22:12:55 [main] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 15.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-07-01 22:12:56 [main] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-07-01 22:12:57 [main] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 22:12:58 [main] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-07-01 22:12:59 [main] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-07-01 22:12:59 [main] DEBUG o.s.s.c.a.a.c.AuthenticationConfiguration$DefaultPasswordEncoderAuthenticationManagerBuilder - No authenticationProviders and no parentAuthenticationManager defined. Returning null.
2025-07-01 22:12:59 [main] INFO  c.h.medical.config.SecurityConfig - Configuring SecurityFilterChain with rules
2025-07-01 22:12:59 [main] INFO  c.h.medical.config.SecurityConfig - Setting up authorization rules
2025-07-01 22:12:59 [main] DEBUG o.s.s.web.DefaultSecurityFilterChain - Will secure any request with filters: DisableEncodeUrlFilter, WebAsyncManagerIntegrationFilter, SecurityContextHolderFilter, HeaderWriterFilter, CorsFilter, LogoutFilter, JwtAuthenticationFilter, RequestCacheAwareFilter, SecurityContextHolderAwareRequestFilter, AnonymousAuthenticationFilter, SessionManagementFilter, ExceptionTranslationFilter, AuthorizationFilter
2025-07-01 22:12:59 [main] INFO  c.h.medical.config.SecurityConfig - Initializing AuthenticationManager
2025-07-01 22:12:59 [main] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-07-01 22:12:59 [main] INFO  c.h.medical.MedicalApplication - Started MedicalApplication in 9.2 seconds (process running for 10.008)
2025-07-01 22:14:15 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-07-01 22:14:15 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-07-01 22:14:15 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-07-01 22:14:15 [http-nio-8080-exec-1] DEBUG o.s.s.w.f.HttpStatusRequestRejectedHandler - Rejecting request due to: The request was rejected because the URL contained a potentially malicious String "//"
org.springframework.security.web.firewall.RequestRejectedException: The request was rejected because the URL contained a potentially malicious String "//"
	at org.springframework.security.web.firewall.StrictHttpFirewall.rejectedBlocklistedUrls(StrictHttpFirewall.java:548)
	at org.springframework.security.web.firewall.StrictHttpFirewall.getFirewalledRequest(StrictHttpFirewall.java:518)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1447)
2025-07-01 22:14:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Securing POST /error
2025-07-01 22:14:15 [http-nio-8080-exec-1] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 22:14:15 [http-nio-8080-exec-1] DEBUG o.s.security.web.FilterChainProxy - Secured POST /error
2025-07-01 22:18:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/forgot-password
2025-07-01 22:18:49 [http-nio-8080-exec-4] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/forgot-password with Authorization header: null
2025-07-01 22:18:49 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/auth/forgot-password
2025-07-01 22:18:49 [http-nio-8080-exec-4] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/forgot-password
2025-07-01 22:18:49 [http-nio-8080-exec-4] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 22:18:49 [http-nio-8080-exec-4] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/forgot-password
2025-07-01 22:18:49 [http-nio-8080-exec-4] INFO  c.h.medical.controller.AuthAPI - Processing forgot password request for email: Vymainguyen1908@gmail.com
2025-07-01 22:18:49 [http-nio-8080-exec-4] INFO  c.h.medical.service.EmailService - Attempting to send OTP email to: Vymainguyen1908@gmail.com
2025-07-01 22:18:54 [http-nio-8080-exec-4] INFO  c.h.medical.service.EmailService - OTP email sent successfully to: Vymainguyen1908@gmail.com
2025-07-01 22:22:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Securing POST /api/auth/reset-password-otp
2025-07-01 22:22:46 [http-nio-8080-exec-7] INFO  c.h.m.s.JwtAuthenticationFilter - Processing request to /api/auth/reset-password-otp with Authorization header: null
2025-07-01 22:22:46 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - No Bearer token found in request to /api/auth/reset-password-otp
2025-07-01 22:22:46 [http-nio-8080-exec-7] DEBUG c.h.m.s.JwtAuthenticationFilter - Proceeding to next filter for request to /api/auth/reset-password-otp
2025-07-01 22:22:46 [http-nio-8080-exec-7] DEBUG o.s.s.w.a.AnonymousAuthenticationFilter - Set SecurityContextHolder to anonymous SecurityContext
2025-07-01 22:22:46 [http-nio-8080-exec-7] DEBUG o.s.security.web.FilterChainProxy - Secured POST /api/auth/reset-password-otp
2025-07-01 22:22:46 [http-nio-8080-exec-7] INFO  c.h.medical.controller.AuthAPI - Processing reset password OTP for email: Vymainguyen1908@gmail.com
2025-07-01 22:23:58 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-07-01 22:23:58 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-07-01 22:23:58 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-07-01 22:23:58 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-07-01 22:23:59 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
